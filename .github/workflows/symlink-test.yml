name: Test Symlink Creation

# Testa se os symlinks seriam criados corretamente
on:
  workflow_dispatch:  # Permite execu√ß√£o manual
  push:
    branches: [ main ]
    paths:
      - 'install.sh'
      - '.config/**'
  pull_request:
    paths:
      - 'install.sh'
      - '.config/**'

jobs:
  test-install:
    name: Testar Script de Instala√ß√£o
    runs-on: ubuntu-latest
    
    steps:
      - name: Checkout repository
        uses: actions/checkout@v4

      # Simula ambiente de instala√ß√£o
      - name: Setup test environment
        run: |
          mkdir -p ~/.config
          mkdir -p ~/test-backup

      # Testa cria√ß√£o de symlinks (dry-run)
      - name: Test symlink creation
        run: |
          echo "üîç Testando cria√ß√£o de symlinks..."
          
          # Lista de configs esperados
          configs=(
            "hypr"
            "fish"
            "kitty"
            "nvim"
            "waybar"
            "wofi"
          )
          
          # Verifica se cada diret√≥rio existe
          for config in "${configs[@]}"; do
            if [ -e ".config/$config" ]; then
              echo "‚úÖ .config/$config existe"
            else
              echo "‚ùå .config/$config N√ÉO encontrado"
              exit 1
            fi
          done
          
          echo "‚úÖ Todos os diret√≥rios de configura√ß√£o est√£o presentes"

      # Valida sintaxe do script de instala√ß√£o
      - name: Validate install.sh syntax
        run: |
          bash -n install.sh
          echo "‚úÖ Sintaxe do install.sh est√° v√°lida"
